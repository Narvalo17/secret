<div class="password-reset-container">
  <!-- Étape de demande de réinitialisation -->
  <div class="reset-form" *ngIf="step === 'request'">
    <h2>Réinitialisation du mot de passe</h2>
    <p class="description">
      Entrez votre adresse email pour recevoir un lien de réinitialisation.
    </p>

    <form [formGroup]="requestForm" (ngSubmit)="onRequestSubmit()">
      <div class="form-group">
        <label for="email">Email</label>
        <input 
          type="email" 
          id="email" 
          formControlName="email" 
          class="form-control" 
          placeholder="votre@email.com"
          [class.is-invalid]="requestForm.get('email')?.invalid && requestForm.get('email')?.touched"
        >
        <div class="error-message" *ngIf="requestForm.get('email')?.errors?.['required'] && requestForm.get('email')?.touched">
          L'email est requis
        </div>
        <div class="error-message" *ngIf="requestForm.get('email')?.errors?.['email'] && requestForm.get('email')?.touched">
          Format d'email invalide
        </div>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn btn-primary" [disabled]="requestForm.invalid || loading">
          <span class="spinner-border spinner-border-sm" *ngIf="loading"></span>
          Envoyer le lien
        </button>
      </div>
    </form>
  </div>

  <!-- Étape de réinitialisation -->
  <div class="reset-form" *ngIf="step === 'reset'">
    <h2>Nouveau mot de passe</h2>
    <p class="description">
      Entrez le code reçu par email et votre nouveau mot de passe.
    </p>

    <form [formGroup]="resetForm" (ngSubmit)="onResetSubmit()">
      <div class="form-group">
        <label for="token">Code de réinitialisation</label>
        <input 
          type="text" 
          id="token" 
          formControlName="token" 
          class="form-control" 
          placeholder="Entrez le code reçu par email"
          [class.is-invalid]="resetForm.get('token')?.invalid && resetForm.get('token')?.touched"
        >
        <div class="error-message" *ngIf="resetForm.get('token')?.errors?.['required'] && resetForm.get('token')?.touched">
          Le code est requis
        </div>
      </div>

      <div class="form-group">
        <label for="password">Nouveau mot de passe</label>
        <input 
          type="password" 
          id="password" 
          formControlName="password" 
          class="form-control" 
          placeholder="Minimum 8 caractères"
          [class.is-invalid]="resetForm.get('password')?.invalid && resetForm.get('password')?.touched"
        >
        <div class="error-message" *ngIf="resetForm.get('password')?.errors?.['required'] && resetForm.get('password')?.touched">
          Le mot de passe est requis
        </div>
        <div class="error-message" *ngIf="resetForm.get('password')?.errors?.['minlength'] && resetForm.get('password')?.touched">
          Le mot de passe doit contenir au moins 8 caractères
        </div>
      </div>

      <div class="form-group">
        <label for="confirmPassword">Confirmer le mot de passe</label>
        <input 
          type="password" 
          id="confirmPassword" 
          formControlName="confirmPassword" 
          class="form-control" 
          placeholder="Confirmez votre mot de passe"
          [class.is-invalid]="resetForm.get('confirmPassword')?.invalid && resetForm.get('confirmPassword')?.touched"
        >
        <div class="error-message" *ngIf="resetForm.get('confirmPassword')?.errors?.['required'] && resetForm.get('confirmPassword')?.touched">
          La confirmation du mot de passe est requise
        </div>
        <div class="error-message" *ngIf="resetForm.errors?.['mismatch'] && resetForm.get('confirmPassword')?.touched">
          Les mots de passe ne correspondent pas
        </div>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn btn-primary" [disabled]="resetForm.invalid || loading">
          <span class="spinner-border spinner-border-sm" *ngIf="loading"></span>
          Réinitialiser le mot de passe
        </button>
      </div>
    </form>
  </div>
</div> 