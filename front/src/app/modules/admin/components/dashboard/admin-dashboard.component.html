<div class="admin-dashboard">
  <div class="dashboard-header">
    <h1>Tableau de bord</h1>
    <button class="refresh-btn" (click)="refreshData()">
      <i class="fas fa-sync-alt"></i> Actualiser
    </button>
  </div>

  <div class="loading-spinner" *ngIf="loading.statistics">
    <i class="fas fa-spinner fa-spin"></i> Chargement des données...
  </div>

  <div class="error-message" *ngIf="error">
    <i class="fas fa-exclamation-circle"></i>
    Une erreur est survenue lors du chargement des données
  </div>

  <div class="dashboard-content" *ngIf="!loading.statistics && !error">
    <div class="stats-grid">
      <div class="stat-card">
        <i class="fas fa-euro-sign"></i>
        <h3>Ventes totales</h3>
        <p class="stat-value">{{ statistics.totalSales | currency:'EUR' }}</p>
      </div>

      <div class="stat-card">
        <i class="fas fa-shopping-cart"></i>
        <h3>Commandes</h3>
        <p class="stat-value">{{ statistics.totalOrders }}</p>
      </div>

      <div class="stat-card">
        <i class="fas fa-users"></i>
        <h3>Clients</h3>
        <p class="stat-value">{{ statistics.totalCustomers }}</p>
      </div>

      <div class="stat-card">
        <i class="fas fa-box"></i>
        <h3>Produits</h3>
        <p class="stat-value">{{ statistics.totalProducts }}</p>
      </div>
    </div>

    <div class="data-sections">
      <section class="recent-orders">
        <h2>Commandes récentes</h2>
        <div class="table-container">
          <table *ngIf="statistics.recentOrders.length > 0">
            <thead>
              <tr>
                <th>ID</th>
                <th>Client</th>
                <th>Date</th>
                <th>Montant</th>
                <th>Statut</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let order of statistics.recentOrders">
                <td>#{{ order.id }}</td>
                <td>{{ order.customerName }}</td>
                <td>{{ order.date | date:'short' }}</td>
                <td>{{ order.amount | currency:'EUR' }}</td>
                <td>
                  <span [class]="'status-' + order.status.toLowerCase()">
                    {{ order.status }}
                  </span>
                </td>
              </tr>
            </tbody>
          </table>
          <p *ngIf="statistics.recentOrders.length === 0" class="no-data">
            Aucune commande récente
          </p>
        </div>
      </section>

      <section class="top-products">
        <h2>Produits populaires</h2>
        <div class="table-container">
          <table *ngIf="statistics.topProducts.length > 0">
            <thead>
              <tr>
                <th>Produit</th>
                <th>Ventes</th>
                <th>Stock</th>
                <th>Prix</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let product of statistics.topProducts">
                <td>{{ product.name }}</td>
                <td>{{ product.sales }}</td>
                <td>{{ product.stock }}</td>
                <td>{{ product.price | currency:'EUR' }}</td>
              </tr>
            </tbody>
          </table>
          <p *ngIf="statistics.topProducts.length === 0" class="no-data">
            Aucun produit à afficher
          </p>
        </div>
      </section>
    </div>
  </div>
</div> 